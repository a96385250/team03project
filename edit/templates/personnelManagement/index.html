{% extends "edit.html" %}
{% load static %}
{% block css %}

{% endblock %}

{% block appcode %}
<form action="">
        <title>修改會員</title>
        <div class="span7">   
                <div class="widget stacked widget-table action-table">
                                    
                    <div class="widget-header">
                        <i class="icon-th-list"></i>
                        <h3>Table</h3>
                    </div> <!-- /widget-header -->
                    
                    <div class="widget-content">
                        
                        <table class="table table-striped table-bordered">
                            <thead>
                                <tr >
                                    <th id="Engine" >Engine</th>
                                    <th id="Browser">Browser</th>
                                    <th id="Engine">Engine</th>
                                    <th id="Browser">Browser</th>
                                    <th id="Engine">Engine</th>
                                    <th id="membername">membername</th>
                                    <th id="address">address</th>

                                    <th class="td-actions"></th>
                                </tr>
                            </thead>
                            <tbody id="tbodyId">

                            </tbody>
                            
                        </table>
                        
                    </div> <!-- /widget-content -->
                
                </div> <!-- /widget -->
        </div>
    <div class="td-actions">
        <a href="javascript:;" class="btn btn-small btn-primary" id= "butOk" >
            <i class="fas fa-check"></i>
        </a>
        
        <a href="javascript:;" class="btn btn-small" name= "butDelect">
            <i class="far fa-trash-alt"></i>					
        </a>
    </div>
    <hr>
    <h1>Web Crawler controls</h1>
    <button id="crawl" class="btn btn-success" id="addrow"><i class="fas fa-bug"></i></button>
    
{% endblock %}
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
{% block script %}
<!-- <script src= "index.js"></script> -->
<script>
        // <讀取資料=================================================================>
$(document).ready(function(){
    function loadTodo(){
      $.getJSON('/api3/Member/',function(datas){
          // console.log(datas)
          var tb =  $('#tbodyId');
          var docFrag = $(document.createDocumentFragment())
          $.each(datas,function(idx,Member){

              var cell1 = $('<td></td>').text(Member.teamid)
              var cell2 = $('<td></td>').text(Member.email).attr('contenteditable','true')
              var cell3 = $('<td></td>').text(Member.password).attr('contenteditable','true')
              var cell4 = $('<td></td>').text(Member.newsletter).attr('contenteditable','true')
              var cell5 = $('<td></td>').text(Member.phoneno).attr('contenteditable','true')
              var cell6 = $('<td></td>').text(Member.username ).attr('contenteditable','true')
              var cell7 = $('<td></td>').text(Member.membername ).attr('contenteditable','true')
              var cell8 = $('<td></td>').text(Member.address ).attr('contenteditable','true')


              var row = $('<tr></tr>').append([cell1,cell2,cell3,cell4,cell5,cell6,cell7,cell8])
              //<tbody><tr>
              docFrag.append(row)
          })
          tb.html(docFrag)
      })
    }

    // <新增資料=================================================================>
    $("#butOk").on("click","#butOk",function(){
       var row={
        "teamid": $('#teamid').val(),
        "email": $('#email').val(),
        "password": $('#password').val(),
        "phoneno": $('#phoneno').val(),
        "username": $('#username').val(),
        "membername": $('#membername').val(),
        "address": $('#address').val()
       }
        $.ajax({
            'url':'/api3/Member/',
            'type':'POST',
            'data':row
        })
    loadTodo()
    })

})

</script>
{% endblock %}